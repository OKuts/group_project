!function(){var e,t={3815:function(e,t,n){"use strict";n(1539),n(8674),n(5666),n(3371);var r=n(8901),o=n.n(r),a="https://lab.lectrum.io/js2/api/crm";function c(e,t,n,r,o,a,c){try{var u=e[a](c),i=u.value}catch(e){return void n(e)}u.done?t(i):Promise.resolve(i).then(r,o)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function u(e){c(a,r,o,u,i,"next",e)}function i(e){c(a,r,o,u,i,"throw",e)}u(void 0)}))}}var i=Object.freeze({verifyToken:function(e){return u(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(a,"/auth"),{method:"GET",headers:{"x-token":e}});case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})))()},getUserName:function(e){return u(regeneratorRuntime.mark((function t(){var n,r,c,u,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(a,"/profile"),{method:"GET",headers:{"x-token":e}});case 2:if((n=t.sent).ok){t.next=12;break}return t.next=6,n.json();case 6:throw r=t.sent,c=r.message,o().error(c,"Ошибка!"),localStorage.removeItem("token"),location.href="/",new Error(c);case 12:return t.next=14,n.json();case 14:return u=t.sent,i=u.data,t.abrupt("return",i);case 17:case"end":return t.stop()}}),t)})))()}});function s(e,t,n,r,o,a,c){try{var u=e[a](c),i=u.value}catch(e){return void n(e)}u.done?t(i):Promise.resolve(i).then(r,o)}var f=function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=localStorage.getItem("token"))){e.next=14;break}return e.prev=2,e.next=5,i.verifyToken(t);case 5:"/"!==location.pathname&&"/sign-up.html"!==location.pathname||(location.href="/dashboard.html"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(2),localStorage.removeItem("token"),location.href="/";case 12:e.next=15;break;case 14:"/"!==location.pathname&&"/sign-up.html"!==location.pathname&&(location.href="/");case 15:case"end":return e.stop()}}),e,null,[[2,8]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function c(e){s(a,r,o,c,u,"next",e)}function u(e){s(a,r,o,c,u,"throw",e)}c(void 0)}))});return function(){return t.apply(this,arguments)}}();function l(e,t,n,r,o,a,c){try{var u=e[a](c),i=u.value}catch(e){return void n(e)}u.done?t(i):Promise.resolve(i).then(r,o)}n(8309);var p=function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=localStorage.getItem("token"))){e.next=14;break}return e.prev=2,e.next=5,i.getUserName(t);case 5:n=e.sent,localStorage.setItem("profile",JSON.stringify(n)),document.querySelector(".profile__name").textContent=n.name,document.querySelector(".profile__email").textContent=n.email,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function c(e){l(a,r,o,c,u,"next",e)}function u(e){l(a,r,o,c,u,"throw",e)}c(void 0)}))});return function(){return t.apply(this,arguments)}}();function v(e,t,n,r,o,a,c){try{var u=e[a](c),i=u.value}catch(e){return void n(e)}u.done?t(i):Promise.resolve(i).then(r,o)}function m(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function c(e){v(a,r,o,c,u,"next",e)}function u(e){v(a,r,o,c,u,"throw",e)}c(void 0)}))}}n(2222);var h,d,g,x=Object.freeze({leads:(g=m(regeneratorRuntime.mark((function e(t,n,r){var o,c,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(a,"/leads?page=").concat(r,"&limit=").concat(n),{method:"GET",headers:{"x-token":t}});case 2:return o=e.sent,e.next=5,o.json();case 5:return c=e.sent,u=c.data,e.abrupt("return",u);case 8:case"end":return e.stop()}}),e)}))),function(e,t,n){return g.apply(this,arguments)}),colleagues:(d=m(regeneratorRuntime.mark((function e(t,n,r){var o,c,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(a,"/users?page=").concat(r,"&limit=").concat(n),{method:"GET",headers:{"x-token":t}});case 2:return o=e.sent,e.next=5,o.json();case 5:return c=e.sent,u=c.data,e.abrupt("return",u);case 8:case"end":return e.stop()}}),e)}))),function(e,t,n){return d.apply(this,arguments)}),clients:(h=m(regeneratorRuntime.mark((function e(t,n,r){var o,c,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(a,"/clients?page=").concat(r,"&limit=").concat(n),{method:"GET",headers:{"x-token":t}});case 2:return o=e.sent,e.next=5,o.json();case 5:return c=e.sent,u=c.data,e.abrupt("return",u);case 8:case"end":return e.stop()}}),e)}))),function(e,t,n){return h.apply(this,arguments)})});function w(e,t,n,r,o,a,c){try{var u=e[a](c),i=u.value}catch(e){return void n(e)}u.done?t(i):Promise.resolve(i).then(r,o)}function y(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function c(e){w(a,r,o,c,u,"next",e)}function u(e){w(a,r,o,c,u,"throw",e)}c(void 0)}))}}f(),document.querySelector(".logout__btn").onclick=function(){localStorage.removeItem("token"),location.href="/"},p(),function(){var e=y(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=localStorage.getItem("token"),e.next=4,x.leads(t,10,1);case 4:(n=e.sent)&&(document.getElementById("dealsNum").innerHTML=n.docs.length),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()(),function(){var e=y(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=localStorage.getItem("token"),e.next=4,x.colleagues(t,6,1);case 4:(n=e.sent)&&(document.getElementById("usersNum").innerHTML=n.docs.length),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()(),function(){var e=y(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=localStorage.getItem("token"),e.next=4,x.colleagues(t,8,1);case 4:(n=e.sent)&&(document.getElementById("clientsNum").innerHTML=n.docs.length),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()()},1194:function(e,t,n){var r=n(7293),o=n(5112),a=n(7392),c=o("species");e.exports=function(e){return a>=51||!r((function(){var t=[];return(t.constructor={})[c]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},7475:function(e,t,n){var r=n(111),o=n(3157),a=n(5112)("species");e.exports=function(e){var t;return o(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!o(t.prototype)?r(t)&&null===(t=t[a])&&(t=void 0):t=void 0),void 0===t?Array:t}},5417:function(e,t,n){var r=n(7475);e.exports=function(e,t){return new(r(e))(0===t?0:t)}},6135:function(e,t,n){"use strict";var r=n(4948),o=n(3070),a=n(9114);e.exports=function(e,t,n){var c=r(t);c in e?o.f(e,c,a(0,n)):e[c]=n}},3157:function(e,t,n){var r=n(4326);e.exports=Array.isArray||function(e){return"Array"==r(e)}},1156:function(e,t,n){var r=n(5656),o=n(8006).f,a={}.toString,c="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return c&&"[object Window]"==a.call(e)?function(e){try{return o(e)}catch(e){return c.slice()}}(e):o(r(e))}},5296:function(e,t){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,o=r&&!n.call({1:2},1);t.f=o?function(e){var t=r(this,e);return!!t&&t.enumerable}:n}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var a=n[e]={exports:{}};return t[e].call(a.exports,a,a.exports,r),a.exports}r.m=t,r.amdD=function(){throw new Error("define cannot be used indirect")},e=[],r.O=function(t,n,o,a){if(!n){var c=1/0;for(f=0;f<e.length;f++){n=e[f][0],o=e[f][1],a=e[f][2];for(var u=!0,i=0;i<n.length;i++)(!1&a||c>=a)&&Object.keys(r.O).every((function(e){return r.O[e](n[i])}))?n.splice(i--,1):(u=!1,a<c&&(c=a));if(u){e.splice(f--,1);var s=o();void 0!==s&&(t=s)}}return t}a=a||0;for(var f=e.length;f>0&&e[f-1][2]>a;f--)e[f]=e[f-1];e[f]=[n,o,a]},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={966:0,901:0};r.O.j=function(t){return 0===e[t]};var t=function(t,n){var o,a,c=n[0],u=n[1],i=n[2],s=0;for(o in u)r.o(u,o)&&(r.m[o]=u[o]);if(i)var f=i(r);for(t&&t(n);s<c.length;s++)a=c[s],r.o(e,a)&&e[a]&&e[a][0](),e[c[s]]=0;return r.O(f)},n=self.webpackChunkjs_personal_projects=self.webpackChunkjs_personal_projects||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var o=r.O(void 0,[773,747,901],(function(){return r(3815)}));o=r.O(o)}();