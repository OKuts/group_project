!function(){"use strict";var e,t={787:function(e,t,r){r(7042),r(1539),r(8309),r(1038),r(8783),r(2526),r(1817),r(2165),r(6992),r(3948),r(8674),r(5666),r(3371),r(9714);var n=r(8901),o=r.n(n),a="https://lab.lectrum.io/js2/api/crm",i=r(1581),u=r.n(i),c=r(5477),s=r.n(c),f=new(u())({allErrors:!0});s()(f);var l=f.compile({$schema:"http://json-schema.org/draft-07/schema#",title:"Login",description:"Schema for login entity",type:"object",properties:{email:{type:"string",format:"email"},password:{type:"string",minLength:8}},additionalProperties:!1,required:["email","password"]});function p(e,t,r,n,o,a,i){try{var u=e[a](i),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}var h=Object.freeze({login:{fetch:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var r,n,i,u,c,s,f,p,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.email,n=t.password,l(i={email:r,password:n})){e.next=7;break}throw u="Форма заполнена не верно, пожалуйста введите правильно почту и пароль. Пароль должен содержать минимум 8 символов",o().error(u,"Ошибка!"),new Error(u);case 7:return e.next=9,fetch("".concat(a,"/login"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(i)});case 9:if((c=e.sent).ok){e.next=17;break}return e.next=13,c.json();case 13:throw s=e.sent,f=s.message,o().error(f,"Ошибка!"),new Error(f);case 17:return e.next=19,c.json();case 19:p=e.sent,h=p.data,localStorage.setItem("token",h),window.location.href="dashboard.html";case 23:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){p(a,n,o,i,u,"next",e)}function u(e){p(a,n,o,i,u,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}())}});function v(e,t,r,n,o,a,i){try{var u=e[a](i),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function m(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){v(a,n,o,i,u,"next",e)}function u(e){v(a,n,o,i,u,"throw",e)}i(void 0)}))}}var d=Object.freeze({verifyToken:function(e){return m(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(a,"/auth"),{method:"GET",headers:{"x-token":e}});case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})))()},getUserName:function(e){return m(regeneratorRuntime.mark((function t(){var r,n,i,u,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(a,"/profile"),{method:"GET",headers:{"x-token":e}});case 2:if((r=t.sent).ok){t.next=12;break}return t.next=6,r.json();case 6:throw n=t.sent,i=n.message,o().error(i,"Ошибка!"),localStorage.removeItem("token"),location.href="/",new Error(i);case 12:return t.next=14,r.json();case 14:return u=t.sent,c=u.data,t.abrupt("return",c);case 17:case"end":return t.stop()}}),t)})))()}});function g(e,t,r,n,o,a,i){try{var u=e[a](i),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function w(e,t,r,n,o,a,i){try{var u=e[a](i),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}!function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=localStorage.getItem("token"))){e.next=14;break}return e.prev=2,e.next=5,d.verifyToken(t);case 5:"/"!==location.pathname&&"/sign-up.html"!==location.pathname||(location.href="/dashboard.html"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(2),localStorage.removeItem("token"),location.href="/";case 12:e.next=15;break;case 14:"/"!==location.pathname&&"/sign-up.html"!==location.pathname&&(location.href="/");case 15:case"end":return e.stop()}}),e,null,[[2,8]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){g(a,n,o,i,u,"next",e)}function u(e){g(a,n,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}()();var b,x=document.querySelectorAll(".form form input"),k=document.querySelector(".form form"),j=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(e,t):void 0}}(e))){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw a}}}}(x);try{for(j.s();!(b=j.n()).done;){var O=b.value;"submit"!==O.type&&O.addEventListener("input",(function(e){e.target.value&&e.target.value.length?e.target.classList.add("filled"):e.target.classList.remove("filled")}))}}catch(e){j.e(e)}finally{j.f()}k.addEventListener("submit",function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=new FormData(t.target),n=r.get("email"),o=r.get("password"),e.next=6,h.login.fetch({email:n,password:o});case 6:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){w(a,n,o,i,u,"next",e)}function u(e){w(a,n,o,i,u,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}())}},r={};function n(e){var o=r[e];if(void 0!==o)return o.exports;var a=r[e]={exports:{}};return t[e].call(a.exports,a,a.exports,n),a.exports}n.m=t,n.amdD=function(){throw new Error("define cannot be used indirect")},e=[],n.O=function(t,r,o,a){if(!r){var i=1/0;for(f=0;f<e.length;f++){r=e[f][0],o=e[f][1],a=e[f][2];for(var u=!0,c=0;c<r.length;c++)(!1&a||i>=a)&&Object.keys(n.O).every((function(e){return n.O[e](r[c])}))?r.splice(c--,1):(u=!1,a<i&&(i=a));if(u){e.splice(f--,1);var s=o();void 0!==s&&(t=s)}}return t}a=a||0;for(var f=e.length;f>0&&e[f-1][2]>a;f--)e[f]=e[f-1];e[f]=[r,o,a]},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={826:0,901:0};n.O.j=function(t){return 0===e[t]};var t=function(t,r){var o,a,i=r[0],u=r[1],c=r[2],s=0;for(o in u)n.o(u,o)&&(n.m[o]=u[o]);if(c)var f=c(n);for(t&&t(r);s<i.length;s++)a=i[s],n.o(e,a)&&e[a]&&e[a][0](),e[i[s]]=0;return n.O(f)},r=self.webpackChunkjs_personal_projects=self.webpackChunkjs_personal_projects||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var o=n.O(void 0,[773,165,984,901],(function(){return n(787)}));o=n.O(o)}();